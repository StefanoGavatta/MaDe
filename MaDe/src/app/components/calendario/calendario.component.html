<div class="calendar-container">
    <div class="calendar">
      <div class="calendar-headline">
        <div class="calendar-headline-month">
          {{ firstDayOfActiveMonth().monthShort }},
          {{ firstDayOfActiveMonth().year }}
        </div>
        <div class="calendar-headline-controls">
          <div class="calendar-headline-control" (click)="goToPreviousMonth()">
            «
          </div>
          <div
            class="calendar-headline-control calendar-headline-control-today"
            (click)="goToToday()"
          >
            Oggi
          </div>
          <div class="calendar-headline-control" (click)="goToNextMonth()">»</div>
        </div>
      </div>
      <div class="calendar-weeks-grid">
        @for (weekDay of weekDays(); track $index) {
          <div class="calendar-weeks-grid-cell">{{ weekDay }}</div>
        }
      </div>
<!--       <div class="calendar-grid">
        @for (dayOfMonth of daysOfMonth(); track $index) {
          <div
            [ngClass]="{
              'calendar-grid-cell': true,
              'calendar-grid-cell-active':
                activeDay()?.toISODate() === dayOfMonth.toISODate(),
              'calendar-grid-cell-inactive':
                dayOfMonth.month !== firstDayOfActiveMonth().month
            }"
            (click)="activeDay.set(dayOfMonth)"
          >
            <div class="day-number">{{ dayOfMonth.day }}</div>
            <div class="day-events">
              @for (meeting of getMeetingsForDay(dayOfMonth); track $index) {
                <div class="event-item" *ngIf="$index < 3">{{ meeting }}</div>
              }
              @if (getMeetingsForDay(dayOfMonth).length > 2) {
                <div class="event-more">+{{ getMeetingsForDay(dayOfMonth).length - 2 }} altri</div>
              }
            </div>
          </div>
        }
      </div> -->
      <div class="calendar-grid">

        @for (dayOfMonth of daysOfMonth(); track $index) {
          <div
            [ngClass]="{
              'calendar-grid-cell': true,
              'calendar-grid-cell-active': activeDay()?.toISODate() === dayOfMonth.toISODate(),
              'calendar-grid-cell-inactive': dayOfMonth.month !== firstDayOfActiveMonth().month,
              'scale-up-center': activeDay()?.toISODate() === dayOfMonth.toISODate()
            }"
            (click)="onDayClick(dayOfMonth)"
          >
            <div class="day-number">{{ dayOfMonth.day }}</div>
            <div class="day-events">
              @for (meeting of getMeetingsForDay(dayOfMonth); track $index) {
                <div class="event-item" *ngIf="$index < 3">{{ meeting }}</div>
              }
              @if (getMeetingsForDay(dayOfMonth).length > 2) {
                <div class="event-more">+{{ getMeetingsForDay(dayOfMonth).length - 2 }} altri</div>
              }
            </div>
          </div>
        }
      </div>
    </div>

  </div>



  @if (bho) {
    <div class="date-overlay">
      <div class="overlay-backdrop" (click)="closeOverlay()"></div>
      
      <div class="date-detail-card">
        <div class="date-header">
          <img src="assets/logo.png" alt="Logo" class="logo">
          <button class="close-btn" (click)="closeOverlay()">&times;</button>
        </div>

        <div class="events-container">
         
        </div>

      </div>
    </div>
  }

